import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import matplotlib
matplotlib.use('Agg')  # 使用 'Agg' 后端

# 设置matplotlib的字体
plt.rcParams['font.sans-serif'] = ['SimHei']  # 如果你的电脑上没有'SimHei'字体，你需要选择一个支持中文的字体
plt.rcParams['axes.unicode_minus'] = False

# 创建一个数据字典
data = {
    '年份': [2021, 2025, 2029, 2033, 2037, 2041, 2045, 2049, 2053, 2057, 2061, 2065, 2069, 2073, 2077, 2081, 2085, 2089, 2093, 2097, 2101],
    'water': [27.5841, 27.1968318, 27.4198771, 27.7076751, 27.9435632, 28.114345, 28.2318142, 28.3105619, 28.362581, 28.3966264, 28.4187688, 28.4331057, 28.4423581, 28.4483147, 28.4521423, 28.4545983, 28.4561725, 28.4571807, 28.4578259, 28.4582386, 28.4585025],
    'settlement': [460.8189, 503.1339928, 521.1748971, 530.2434246, 535.332954, 538.3806387, 540.2672149, 541.4537919, 542.2057004, 542.6838546, 542.9884452, 543.1826435, 543.3065182, 543.3855576, 543.4359985, 543.4681925, 543.4887424, 543.5018605, 543.5102349, 543.5155812, 543.5189944],
    'land': [1334.5263, 1411.538557, 1428.998817, 1429.911238, 1427.636257, 1425.373204, 1423.69693, 1422.559775, 1421.813975, 1421.331764, 1421.021944, 1420.823462, 1420.696487, 1420.615315, 1420.563443, 1420.530305, 1420.509136, 1420.495616, 1420.486981, 1420.481467, 1420.477945],
    'grassland': [47.9007, 68.7004324, 71.7648985, 72.4216234, 72.436468, 72.3326898, 72.2342815, 72.162258, 72.1136076, 72.0817549, 72.0611744, 72.0479552, 72.0394875, 72.0340707, 72.0306078, 72.028395, 72.0269813, 72.0260782, 72.0255014, 72.0251331, 72.0248978],
    'bareland': [271.5336, 131.5237865, 92.7351106, 81.8096388, 78.7443581, 77.8927221, 77.6633597, 77.6072128, 77.5977356, 77.5995998, 77.6032679, 77.6064333, 77.6087492, 77.6103426, 77.6114079, 77.6121096, 77.6125676, 77.6128647, 77.6130568, 77.6131806, 77.6132602]
}

# 转换为数据框
df = pd.DataFrame(data)

# 绘制折线图
plt.figure(figsize=(10, 6))
for column in df.columns[1:]:
    plt.plot(df['年份'], df[column], label=column)
plt.xlabel('年份')
plt.ylabel('数值')
plt.legend()
plt.grid(True)
plt.title('土地类型变化')
plt.savefig("D:/thesis/SLUD/土地类型变化.png", dpi=300)  # 设置dpi为300
plt.show()
